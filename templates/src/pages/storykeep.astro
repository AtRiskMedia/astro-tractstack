---
import Layout from '@/layouts/Layout.astro';
import PageViewStats from '@/components/storykeep/PageViewStats';
import { requireAdminOrEditor } from '@/utils/auth';

// Check for privileged authentication - redirect if not authenticated
const authCheck = requireAdminOrEditor(Astro);
if (authCheck) return authCheck;

const title = 'Dashboard | StoryKeep';
---

<Layout title={title} storykeep={true} slug="storykeep">
  <main id="main-content" class="min-h-screen w-full">
    <div class="p-8">
      <h2 class="mb-4 text-xl font-semibold">Dashboard</h2>
      <p class="text-gray-600">Welcome to the StoryKeep backend dashboard.</p>

      <!-- Analytics Dashboard -->
      <PageViewStats client:only="react" />
    </div>
  </main>
</Layout>
